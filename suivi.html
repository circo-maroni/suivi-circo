<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Suivi des dossiers - Circonscription du Maroni</title>
    <link href="https://fonts.googleapis.com/css2?family=Libre+Franklin:wght@400;600;700&family=Merriweather:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #003d82;
            --secondary: #0055b8;
            --accent: #c1272d;
            --bg: #f5f5f5;
            --card-bg: #ffffff;
            --text-primary: #1a1a1a;
            --text-secondary: #666666;
            --border: #dcdcdc;
            
            /* Couleurs pastels par commune */
            --apatou: #A7C7E7;
            --grand-santi: #B4E7CE;
            --papaichton: #F4C2D3;
            --maripasoula: #FFE5B4;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Libre Franklin', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg);
            min-height: 100vh;
            color: var(--text-primary);
            padding: 1rem;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
        }

        .official-header {
            display: flex;
            align-items: center;
            gap: 2rem;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 3px solid var(--primary);
        }

        .header-text {
            flex: 1;
        }

        .institution {
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--accent);
            letter-spacing: 0.1em;
            text-transform: uppercase;
            margin-bottom: 0.3rem;
        }

        h1 {
            font-family: 'Merriweather', serif;
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 0.3rem;
            letter-spacing: -0.01em;
        }

        .subtitle {
            font-size: 0.95rem;
            color: var(--text-secondary);
            font-weight: 400;
            letter-spacing: 0.01em;
        }

        /* Grilles */
        .communes-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1.5rem;
            padding: 1rem 0;
        }

        .schools-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 1rem;
            padding: 1rem 0;
        }

        .actions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 2rem;
        }

        /* Bulles communes (grandes) */
        .commune-bubble {
            position: relative;
        }

        .commune-bubble .bubble-link {
            aspect-ratio: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            text-decoration: none;
            color: var(--text-primary);
            transition: all 0.3s ease;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            border: 3px solid;
        }

        .commune-bubble.apatou .bubble-link {
            background: linear-gradient(135deg, var(--apatou) 0%, #B8D4E8 100%);
            border-color: #8CB8DC;
        }

        .commune-bubble.grand-santi .bubble-link {
            background: linear-gradient(135deg, var(--grand-santi) 0%, #C1EBD7 100%);
            border-color: #9DDFC0;
        }

        .commune-bubble.papaichton .bubble-link {
            background: linear-gradient(135deg, var(--papaichton) 0%, #F7D1DC 100%);
            border-color: #EFB0C4;
        }

        .commune-bubble.maripasoula .bubble-link {
            background: linear-gradient(135deg, var(--maripasoula) 0%, #FFEBC1 100%);
            border-color: #FFD89A;
        }

        .commune-bubble .bubble-link:hover {
            transform: translateY(-6px) scale(1.02);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
        }

        .commune-bubble .bubble-content {
            text-align: center;
            padding: 2rem 1rem;
            position: relative;
            z-index: 1;
        }

        .commune-bubble .commune-name {
            font-size: 1.4rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            line-height: 1.2;
            color: var(--text-primary);
        }

        .commune-bubble .commune-count {
            font-size: 0.9rem;
            color: var(--text-secondary);
            font-weight: 500;
        }

        /* Bulles écoles (moyennes) */
        .school-bubble {
            position: relative;
        }

        .school-bubble .bubble-link {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 100%;
            aspect-ratio: 1.1;
            background: var(--card-bg);
            border: 2px solid;
            border-radius: 50%;
            text-decoration: none;
            color: var(--text-primary);
            transition: all 0.3s ease;
            position: relative;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            cursor: pointer;
        }

        /* Couleurs des écoles par commune */
        .school-bubble.apatou-1 .bubble-link {
            background: linear-gradient(135deg, #A7C7E7 0%, #B8D4E8 100%);
            border-color: #8CB8DC;
        }

        .school-bubble.grand-santi-1 .bubble-link {
            background: linear-gradient(135deg, #B4E7CE 0%, #C1EBD7 100%);
            border-color: #9DDFC0;
        }

        .school-bubble.grand-santi-2 .bubble-link {
            background: linear-gradient(135deg, #C1EBD7 0%, #CEEEDE 100%);
            border-color: #A8E4C9;
        }

        .school-bubble.grand-santi-3 .bubble-link {
            background: linear-gradient(135deg, #CEEEDE 0%, #DBF2E5 100%);
            border-color: #B3E8D2;
        }

        .school-bubble.grand-santi-4 .bubble-link {
            background: linear-gradient(135deg, #DBF2E5 0%, #E8F6EC 100%);
            border-color: #BEECDB;
        }

        .school-bubble.grand-santi-5 .bubble-link {
            background: linear-gradient(135deg, #E8F6EC 0%, #F5FAF3 100%);
            border-color: #C9F0E4;
        }

        .school-bubble.papaichton-1 .bubble-link {
            background: linear-gradient(135deg, #F4C2D3 0%, #F7D1DC 100%);
            border-color: #EFB0C4;
        }

        .school-bubble.papaichton-2 .bubble-link {
            background: linear-gradient(135deg, #F7D1DC 0%, #FAE0E5 100%);
            border-color: #F2BFCD;
        }

        .school-bubble.papaichton-3 .bubble-link {
            background: linear-gradient(135deg, #FAE0E5 0%, #FDEFEE 100%);
            border-color: #F5CED6;
        }

        .school-bubble.maripasoula-1 .bubble-link {
            background: linear-gradient(135deg, #FFE5B4 0%, #FFEBC1 100%);
            border-color: #FFD89A;
        }

        .school-bubble.maripasoula-2 .bubble-link {
            background: linear-gradient(135deg, #FFEBC1 0%, #FFF0CE 100%);
            border-color: #FFDDA7;
        }

        .school-bubble.maripasoula-3 .bubble-link {
            background: linear-gradient(135deg, #FFF0CE 0%, #FFF5DB 100%);
            border-color: #FFE2B4;
        }

        .school-bubble.maripasoula-4 .bubble-link {
            background: linear-gradient(135deg, #FFF5DB 0%, #FFFAE8 100%);
            border-color: #FFE7C1;
        }

        .school-bubble.maripasoula-5 .bubble-link {
            background: linear-gradient(135deg, #FFFAE8 0%, #FFFDF2 100%);
            border-color: #FFECCE;
        }

        .school-bubble.maripasoula-6 .bubble-link {
            background: linear-gradient(135deg, #FFFDF2 0%, #FFFEF9 100%);
            border-color: #FFF1DB;
        }

        .school-bubble.maripasoula-7 .bubble-link {
            background: linear-gradient(135deg, #FFFEF9 0%, #FFFFFC 100%);
            border-color: #FFF6E8;
        }

        .school-bubble.maripasoula-8 .bubble-link {
            background: linear-gradient(135deg, #FFFFFC 0%, #FFFFFF 100%);
            border-color: #FFFBF5;
        }

        .school-bubble.maripasoula-9 .bubble-link {
            background: linear-gradient(135deg, #FFF8E7 0%, #FFFCF0 100%);
            border-color: #FFE9C8;
        }

        .school-bubble.maripasoula-10 .bubble-link {
            background: linear-gradient(135deg, #FFFCF0 0%, #FFFEF9 100%);
            border-color: #FFEED5;
        }

        .school-bubble .bubble-link:hover {
            transform: translateY(-4px);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
        }

        .school-bubble .bubble-content {
            position: relative;
            z-index: 1;
            text-align: center;
            padding: 1.5rem 0.5rem;
        }

        .school-bubble .school-name {
            font-size: 0.85rem;
            font-weight: 600;
            margin-bottom: 0.3rem;
            line-height: 1.2;
            color: var(--text-primary);
        }

        .school-bubble .school-subtitle {
            font-size: 0.7rem;
            color: var(--text-secondary);
            font-weight: 400;
        }

        .arrow-icon {
            position: absolute;
            bottom: 10%;
            right: 10%;
            width: 16px;
            height: 16px;
            opacity: 0;
            transition: all 0.3s ease;
            stroke: var(--text-primary);
        }

        .bubble-link:hover .arrow-icon {
            opacity: 1;
            transform: translate(3px, -3px);
        }

        /* Pages */
        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        .commune-page {
            display: none;
        }

        .commune-page.active {
            display: block;
        }

        .school-page {
            display: none;
        }

        .school-page.active {
            display: block;
        }

        /* Bouton retour */
        .back-button {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: var(--card-bg);
            border: 2px solid var(--border);
            color: var(--primary);
            padding: 0.6rem 1.2rem;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 1.5rem;
        }

        .back-button:hover {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .back-icon {
            width: 18px;
            height: 18px;
        }

        .school-detail-header {
            margin-bottom: 2rem;
        }

        .school-detail-header h2 {
            font-family: 'Merriweather', serif;
            font-size: 1.6rem;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }

        .school-detail-header p {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Modal de mot de passe */
        .password-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .password-modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 2rem;
            max-width: 400px;
            width: 90%;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            border: 2px solid var(--border);
        }

        .modal-header {
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .modal-header h3 {
            font-family: 'Merriweather', serif;
            color: var(--primary);
            font-size: 1.4rem;
            margin-bottom: 0.5rem;
        }

        .modal-header p {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .lock-icon {
            width: 48px;
            height: 48px;
            margin: 0 auto 1rem;
            stroke: var(--primary);
        }

        .password-input-group {
            margin-bottom: 1rem;
        }

        .password-input-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.9rem;
        }

        .password-input-group input {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-size: 1rem;
            font-family: inherit;
            transition: border-color 0.3s ease;
        }

        .password-input-group input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .password-input-group input.error {
            border-color: var(--accent);
        }

        .error-message {
            color: var(--accent);
            font-size: 0.85rem;
            margin-top: 0.5rem;
            display: none;
        }

        .error-message.active {
            display: block;
        }

        .modal-buttons {
            display: flex;
            gap: 0.75rem;
            margin-top: 1.5rem;
        }

        .modal-button {
            flex: 1;
            padding: 0.75rem;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        .modal-button.primary {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .modal-button.primary:hover {
            background: var(--secondary);
            border-color: var(--secondary);
        }

        .modal-button.secondary {
            background: var(--card-bg);
            color: var(--primary);
        }

        .modal-button.secondary:hover {
            background: var(--bg);
        }

        footer {
            text-align: center;
            margin-top: 2rem;
            padding-top: 1rem;
            border-top: 1px solid var(--border);
            color: var(--text-secondary);
            font-size: 0.75rem;
        }

        /* Responsive design */
        @media (max-width: 1200px) {
            .communes-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            .schools-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        @media (max-width: 768px) {
            .official-header {
                flex-direction: column;
                text-align: center;
            }

            h1 {
                font-size: 1.5rem;
            }

            .institution {
                font-size: 0.75rem;
            }

            .subtitle {
                font-size: 0.85rem;
            }

            .communes-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 1rem;
            }

            .schools-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 0.8rem;
            }

            .school-name {
                font-size: 0.75rem;
            }

            .actions-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .modal-content {
                padding: 1.5rem;
            }
        }

        @media (max-width: 480px) {
            .communes-grid {
                grid-template-columns: 1fr;
            }

            .schools-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .school-name {
                font-size: 0.7rem;
            }

            .actions-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="official-header">
            <div class="header-text">
                <div class="institution">CIRCONSCRIPTION DU MARONI</div>
                <h1>Suivi des dossiers</h1>
                <p class="subtitle">Tableaux de bord par établissement</p>
            </div>
        </div>

        <!-- Page principale avec communes -->
        <div id="main-page" class="page active">
            <div id="communes-grid" class="communes-grid">
                <!-- Les communes seront générées par JavaScript -->
            </div>
        </div>

        <!-- Pages des communes avec leurs écoles -->
        <div id="commune-pages">
            <!-- Les pages de communes seront générées par JavaScript -->
        </div>

        <!-- Pages individuelles pour chaque école -->
        <div id="school-pages">
            <!-- Les pages d'écoles seront générées par JavaScript -->
        </div>

        <footer>
            <p>© Circonscription du Maroni - Académie de Guyane | Accès sécurisé par établissement</p>
        </footer>
    </div>

    <!-- Modal de mot de passe -->
    <div id="password-modal" class="password-modal">
        <div class="modal-content">
            <svg class="lock-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
            </svg>
            <div class="modal-header">
                <h3 id="modal-school-name"></h3>
                <p>Accès sécurisé</p>
            </div>
            <div class="password-input-group">
                <label for="password-input">Mot de passe</label>
                <input type="password" id="password-input" placeholder="Entrez le mot de passe">
                <p class="error-message" id="error-message">Mot de passe incorrect</p>
            </div>
            <div class="modal-buttons">
                <button class="modal-button secondary" onclick="closePasswordModal()">Annuler</button>
                <button class="modal-button primary" onclick="validatePassword()">Valider</button>
            </div>
        </div>
    </div>

    <script>
        // Mot de passe master qui ouvre tout
        const MASTER_PASSWORD = 'maripasoula';

        // Données des communes et écoles
        const communes = [
            {
                id: 'apatou',
                name: 'Apatou',
                class: 'apatou',
                schools: [
                    {
                        id: 'providence',
                        name: 'École primaire Providence',
                        password: 'providence2024',
                        colorClass: 'apatou-1',
                        links: [
                            { title: 'Suivi contractuels', url: 'https://lite.framacalc.org/providence-aiae' },
                            { title: 'Suivi du pacte', url: 'https://lite.framacalc.org/providence-aid6' },
                            { title: 'Retour pacte', url: 'https://nuage02.apps.education.fr/index.php/s/z4KszedMqPajxwF' },
                            { title: 'Formulaire pacte', url: 'https://nuage02.apps.education.fr/index.php/s/PgEPMKCgj9Nk9HX' },
                            { title: 'Liste des enseignants de l\'école', url: 'https://lite.framacalc.org/providence-aiht' },
                            { title: 'Suivi des manifestations sportives', url: 'https://lite.framacalc.org/eps-aiiz' }
                        ]
                    }
                ]
            },
            {
                id: 'grand-santi',
                name: 'Grand-Santi',
                class: 'grand-santi',
                schools: [
                    {
                        id: 'apaguy',
                        name: 'École primaire Apaguy',
                        password: 'apaguy2024',
                        colorClass: 'grand-santi-1',
                        links: [
                            { title: 'Suivi contractuels', url: 'https://lite.framacalc.org/apaguy-aiad' },
                            { title: 'Suivi du pacte', url: 'https://lite.framacalc.org/apaguy-aied' },
                            { title: 'Retour pacte', url: 'https://nuage02.apps.education.fr/index.php/s/z4KszedMqPajxwF' },
                            { title: 'Formulaire pacte', url: 'https://nuage02.apps.education.fr/index.php/s/PgEPMKCgj9Nk9HX' },
                            { title: 'Liste des enseignants de l\'école', url: 'https://lite.framacalc.org/apaguy-aiht' },
                            { title: 'Suivi des manifestations sportives', url: 'https://lite.framacalc.org/eps-aiiz' }
                        ]
                    },
                    {
                        id: 'mofina',
                        name: 'École primaire Monfina',
                        password: 'mofina2024',
                        colorClass: 'grand-santi-2',
                        links: [
                            { title: 'Suivi contractuels', url: 'https://lite.framacalc.org/mofina-aiae' },
                            { title: 'Suivi du pacte', url: 'https://lite.framacalc.org/mofina-aiee' },
                            { title: 'Retour pacte', url: 'https://nuage02.apps.education.fr/index.php/s/z4KszedMqPajxwF' },
                            { title: 'Formulaire pacte', url: 'https://nuage02.apps.education.fr/index.php/s/PgEPMKCgj9Nk9HX' },
                            { title: 'Liste des enseignants de l\'école', url: 'https://lite.framacalc.org/mofina-aiht' },
                            { title: 'Suivi des manifestations sportives', url: 'https://lite.framacalc.org/eps-aiiz' }
                        ]
                    },
                    {
                        id: 'maternelle-castor',
                        name: 'École maternelle Elie Castor',
                        password: 'castor2024',
                        colorClass: 'grand-santi-3',
                        links: [
                            { title: 'Suivi contractuels', url: 'https://lite.framacalc.org/maternelle-castor-aiae' },
                            { title: 'Suivi du pacte', url: 'https://lite.framacalc.org/maternelle-castor-aiee' },
                            { title: 'Retour pacte', url: 'https://nuage02.apps.education.fr/index.php/s/z4KszedMqPajxwF' },
                            { title: 'Formulaire pacte', url: 'https://nuage02.apps.education.fr/index.php/s/PgEPMKCgj9Nk9HX' },
                            { title: 'Liste des enseignants de l\'école', url: 'https://lite.framacalc.org/maternelle-castor-aiht' },
                            { title: 'Suivi des manifestations sportives', url: 'https://lite.framacalc.org/eps-aiiz' }
                        ]
                    },
                    {
                        id: 'fanko',
                        name: 'École élémentaire Fanko Atjali a Mi',
                        password: 'fanko2024',
                        colorClass: 'grand-santi-4',
                        links: [
                            { title: 'Suivi contractuels', url: 'https://lite.framacalc.org/fanko-aiae' },
                            { title: 'Suivi du pacte', url: 'https://lite.framacalc.org/fanko-aiee' },
                            { title: 'Retour pacte', url: 'https://nuage02.apps.education.fr/index.php/s/z4KszedMqPajxwF' },
                            { title: 'Formulaire pacte', url: 'https://nuage02.apps.education.fr/index.php/s/PgEPMKCgj9Nk9HX' },
                            { title: 'Liste des enseignants de l\'école', url: 'https://lite.framacalc.org/fanko-aiht' },
                            { title: 'Suivi des manifestations sportives', url: 'https://lite.framacalc.org/eps-aiiz' }
                        ]
                    },
                    {
                        id: 'elementaire-castor',
                        name: 'École élémentaire Elie Castor',
                        password: 'elemcastor2024',
                        colorClass: 'grand-santi-5',
                        links: [
                            { title: 'Suivi contractuels', url: 'https://lite.framacalc.org/elementaire-castor-aiae' },
                            { title: 'Suivi du pacte', url: 'https://lite.framacalc.org/elie-castor-aied' },
                            { title: 'Retour pacte', url: 'https://nuage02.apps.education.fr/index.php/s/z4KszedMqPajxwF' },
                            { title: 'Formulaire pacte', url: 'https://nuage02.apps.education.fr/index.php/s/PgEPMKCgj9Nk9HX' },
                            { title: 'Liste des enseignants de l\'école', url: 'https://lite.framacalc.org/castor-elem-aiht' },
                            { title: 'Suivi des manifestations sportives', url: 'https://lite.framacalc.org/eps-aiiz' }
                        ]
                    }
                ]
            },
            {
                id: 'papaichton',
                name: 'Papaichton',
                class: 'papaichton',
                schools: [
                    {
                        id: 'gran-man-tolinga',
                        name: 'École élémentaire Gran Man Tolinga',
                        password: 'tolinga2024',
                        colorClass: 'papaichton-1',
                        links: [
                            { title: 'Suivi contractuels', url: 'https://lite.framacalc.org/gran-man-tolinga-aiae' },
                            { title: 'Suivi du pacte', url: 'https://lite.framacalc.org/gran-man-tolinga-aiee' },
                            { title: 'Retour pacte', url: 'https://nuage02.apps.education.fr/index.php/s/z4KszedMqPajxwF' },
                            { title: 'Formulaire pacte', url: 'https://nuage02.apps.education.fr/index.php/s/PgEPMKCgj9Nk9HX' },
                            { title: 'Liste des enseignants de l\'école', url: 'https://lite.framacalc.org/grand-man-tolinga-aiht' },
                            { title: 'Suivi des manifestations sportives', url: 'https://lite.framacalc.org/eps-aiiz' }
                        ]
                    },
                    {
                        id: 'charles-cazal',
                        name: 'École maternelle Capitaine Charles Cazal',
                        password: 'cazal2024',
                        colorClass: 'papaichton-2',
                        links: [
                            { title: 'Suivi contractuels', url: 'https://lite.framacalc.org/charles-cazal-aiae' },
                            { title: 'Suivi du pacte', url: 'https://lite.framacalc.org/charles-cazal-aiee' },
                            { title: 'Retour pacte', url: 'https://nuage02.apps.education.fr/index.php/s/z4KszedMqPajxwF' },
                            { title: 'Formulaire pacte', url: 'https://nuage02.apps.education.fr/index.php/s/PgEPMKCgj9Nk9HX' },
                            { title: 'Liste des enseignants de l\'école', url: 'https://lite.framacalc.org/cazal-aiht' },
                            { title: 'Suivi des manifestations sportives', url: 'https://lite.framacalc.org/eps-aiiz' }
                        ]
                    },
                    {
                        id: 'loca',
                        name: 'École primaire Capitaine Louis Fofi',
                        password: 'loca2024',
                        colorClass: 'papaichton-3',
                        links: [
                            { title: 'Suivi contractuels', url: 'https://lite.framacalc.org/loca-aiae' },
                            { title: 'Suivi du pacte', url: 'https://lite.framacalc.org/loca-aiee' },
                            { title: 'Retour pacte', url: 'https://nuage02.apps.education.fr/index.php/s/z4KszedMqPajxwF' },
                            { title: 'Formulaire pacte', url: 'https://nuage02.apps.education.fr/index.php/s/PgEPMKCgj9Nk9HX' },
                            { title: 'Liste des enseignants de l\'école', url: 'https://lite.framacalc.org/loca-aiht' },
                            { title: 'Suivi des manifestations sportives', url: 'https://lite.framacalc.org/eps-aiiz' }
                        ]
                    }
                ]
            },
            {
                id: 'maripasoula',
                name: 'Maripasoula',
                class: 'maripasoula',
                schools: [
                    {
                        id: 'duplessis',
                        name: 'École maternelle Alexandre Duplessis',
                        password: 'duplessis2024',
                        colorClass: 'maripasoula-1',
                        links: [
                            { title: 'Suivi contractuels', url: 'https://lite.framacalc.org/duplessis-aiae' },
                            { title: 'Suivi du pacte', url: 'https://lite.framacalc.org/duplessis-aiee' },
                            { title: 'Retour pacte', url: 'https://nuage02.apps.education.fr/index.php/s/z4KszedMqPajxwF' },
                            { title: 'Formulaire pacte', url: 'https://nuage02.apps.education.fr/index.php/s/PgEPMKCgj9Nk9HX' },
                            { title: 'Liste des enseignants de l\'école', url: 'https://lite.framacalc.org/duplessis-aiht' },
                            { title: 'Suivi des manifestations sportives', url: 'https://lite.framacalc.org/eps-aiiz' }
                        ]
                    },
                    {
                        id: 'abienso',
                        name: 'École maternelle Antoine Abienso',
                        password: 'abienso2024',
                        colorClass: 'maripasoula-2',
                        links: [
                            { title: 'Suivi contractuels', url: 'https://lite.framacalc.org/abienso-aiae' },
                            { title: 'Suivi du pacte', url: 'https://lite.framacalc.org/abienso-aiee' },
                            { title: 'Retour pacte', url: 'https://nuage02.apps.education.fr/index.php/s/z4KszedMqPajxwF' },
                            { title: 'Formulaire pacte', url: 'https://nuage02.apps.education.fr/index.php/s/PgEPMKCgj9Nk9HX' },
                            { title: 'Liste des enseignants de l\'école', url: 'https://lite.framacalc.org/abienso-aiht' },
                            { title: 'Suivi des manifestations sportives', url: 'https://lite.framacalc.org/eps-aiiz' }
                        ]
                    },
                    {
                        id: 'robert-vignon',
                        name: 'École élémentaire Robert Vignon',
                        password: 'vignon2024',
                        colorClass: 'maripasoula-3',
                        links: [
                            { title: 'Suivi contractuels', url: 'https://lite.framacalc.org/robert-vignon-aiae' },
                            { title: 'Suivi du pacte', url: 'https://lite.framacalc.org/vignon-aiee' },
                            { title: 'Retour pacte', url: 'https://nuage02.apps.education.fr/index.php/s/z4KszedMqPajxwF' },
                            { title: 'Formulaire pacte', url: 'https://nuage02.apps.education.fr/index.php/s/PgEPMKCgj9Nk9HX' },
                            { title: 'Liste des enseignants de l\'école', url: 'https://lite.framacalc.org/robert-vignon-aiht' },
                            { title: 'Suivi des manifestations sportives', url: 'https://lite.framacalc.org/eps-aiiz' }
                        ]
                    },
                    {
                        id: 'alexis-jonas',
                        name: 'École élémentaire Alexis Jonas',
                        password: 'jonas2024',
                        colorClass: 'maripasoula-4',
                        links: [
                            { title: 'Suivi contractuels', url: 'https://lite.framacalc.org/alexis-jonas-aiae' },
                            { title: 'Suivi du pacte', url: 'https://lite.framacalc.org/jonas-aiee' },
                            { title: 'Retour pacte', url: 'https://nuage02.apps.education.fr/index.php/s/z4KszedMqPajxwF' },
                            { title: 'Formulaire pacte', url: 'https://nuage02.apps.education.fr/index.php/s/PgEPMKCgj9Nk9HX' },
                            { title: 'Liste des enseignants de l\'école', url: 'https://lite.framacalc.org/alexis-jonas-aiht' },
                            { title: 'Suivi des manifestations sportives', url: 'https://lite.framacalc.org/eps-aiiz' }
                        ]
                    },
                    {
                        id: 'antecum-pata',
                        name: 'École primaire Pilima',
                        password: 'pidima2024',
                        colorClass: 'maripasoula-5',
                        links: [
                            { title: 'Suivi contractuels', url: 'https://lite.framacalc.org/antecum-pata-aiae' },
                            { title: 'Suivi du pacte', url: 'https://lite.framacalc.org/antecum-pata-aiee' },
                            { title: 'Retour pacte', url: 'https://nuage02.apps.education.fr/index.php/s/z4KszedMqPajxwF' },
                            { title: 'Formulaire pacte', url: 'https://nuage02.apps.education.fr/index.php/s/PgEPMKCgj9Nk9HX' },
                            { title: 'Liste des enseignants de l\'école', url: 'https://lite.framacalc.org/antecum-aiht' },
                            { title: 'Suivi des manifestations sportives', url: 'https://lite.framacalc.org/eps-aiiz' }
                        ]
                    },
                    {
                        id: 'taluen',
                        name: 'École primaire Twenké-Taluwen',
                        password: 'taluen2024',
                        colorClass: 'maripasoula-6',
                        links: [
                            { title: 'Suivi contractuels', url: 'https://lite.framacalc.org/taluen-aiae' },
                            { title: 'Suivi du pacte', url: 'https://lite.framacalc.org/taluen-aiee' },
                            { title: 'Retour pacte', url: 'https://nuage02.apps.education.fr/index.php/s/z4KszedMqPajxwF' },
                            { title: 'Formulaire pacte', url: 'https://nuage02.apps.education.fr/index.php/s/PgEPMKCgj9Nk9HX' },
                            { title: 'Liste des enseignants de l\'école', url: 'https://lite.framacalc.org/taluen-aiht' },
                            { title: 'Suivi des manifestations sportives', url: 'https://lite.framacalc.org/eps-aiiz' }
                        ]
                    },
                    {
                        id: 'elahe',
                        name: 'École élémentaire d\'Elahé',
                        password: 'elahe2024',
                        colorClass: 'maripasoula-7',
                        links: [
                            { title: 'Suivi contractuels', url: 'https://lite.framacalc.org/elahe-aiaf' },
                            { title: 'Suivi du pacte', url: 'https://lite.framacalc.org/elahe-aiee' },
                            { title: 'Retour pacte', url: 'https://nuage02.apps.education.fr/index.php/s/z4KszedMqPajxwF' },
                            { title: 'Formulaire pacte', url: 'https://nuage02.apps.education.fr/index.php/s/PgEPMKCgj9Nk9HX' },
                            { title: 'Liste des enseignants de l\'école', url: 'https://lite.framacalc.org/elahe-aiht' },
                            { title: 'Suivi des manifestations sportives', url: 'https://lite.framacalc.org/eps-aiiz' }
                        ]
                    },
                    {
                        id: 'cayode',
                        name: 'École élémentaire Cayode',
                        password: 'cayode2024',
                        colorClass: 'maripasoula-8',
                        links: [
                            { title: 'Suivi contractuels', url: 'https://lite.framacalc.org/cayode-aiaf' },
                            { title: 'Suivi du pacte', url: 'https://lite.framacalc.org/cayode-aiee' },
                            { title: 'Retour pacte', url: 'https://nuage02.apps.education.fr/index.php/s/z4KszedMqPajxwF' },
                            { title: 'Formulaire pacte', url: 'https://nuage02.apps.education.fr/index.php/s/PgEPMKCgj9Nk9HX' },
                            { title: 'Liste des enseignants de l\'école', url: 'https://lite.framacalc.org/cayode-aiht' },
                            { title: 'Suivi des manifestations sportives', url: 'https://lite.framacalc.org/eps-aiiz' }
                        ]
                    },
                    {
                        id: 'new-wacapou',
                        name: 'École élémentaire Nouveau Wacapou',
                        password: 'wacapou2024',
                        colorClass: 'maripasoula-9',
                        links: [
                            { title: 'Suivi contractuels', url: 'https://lite.framacalc.org/new-wacapou-aiae' },
                            { title: 'Suivi du pacte', url: 'https://lite.framacalc.org/new-wacapou-aiee' },
                            { title: 'Retour pacte', url: 'https://nuage02.apps.education.fr/index.php/s/z4KszedMqPajxwF' },
                            { title: 'Formulaire pacte', url: 'https://nuage02.apps.education.fr/index.php/s/PgEPMKCgj9Nk9HX' },
                            { title: 'Liste des enseignants de l\'école', url: 'https://lite.framacalc.org/wacapou-aiht' },
                            { title: 'Suivi des manifestations sportives', url: 'https://lite.framacalc.org/eps-aiiz' }
                        ]
                    },
                    {
                        id: 'tobie-balla',
                        name: 'École primaire Tobie Balla',
                        password: 'balla2024',
                        colorClass: 'maripasoula-10',
                        links: [
                            { title: 'Suivi contractuels', url: 'https://lite.framacalc.org/tobie-balla-aiae' },
                            { title: 'Suivi du pacte', url: 'https://lite.framacalc.org/tobie-balla-aiee' },
                            { title: 'Retour pacte', url: 'https://nuage02.apps.education.fr/index.php/s/z4KszedMqPajxwF' },
                            { title: 'Formulaire pacte', url: 'https://nuage02.apps.education.fr/index.php/s/PgEPMKCgj9Nk9HX' },
                            { title: 'Liste des enseignants de l\'école', url: 'https://lite.framacalc.org/tobie-balla-aiht' },
                            { title: 'Suivi des manifestations sportives', url: 'https://lite.framacalc.org/eps-aiiz' }
                        ]
                    }
                ]
            }
        ];

        let currentCommuneId = null;
        let currentSchoolId = null;

        // Génération de la page principale avec les communes
        function generateMainPage() {
            const communesGrid = document.getElementById('communes-grid');
            communesGrid.innerHTML = '';
            
            communes.forEach(commune => {
                const bubble = document.createElement('div');
                bubble.className = `commune-bubble ${commune.class}`;
                bubble.innerHTML = `
                    <div class="bubble-link" onclick="showCommunePage('${commune.id}')">
                        <div class="bubble-content">
                            <h2 class="commune-name">${commune.name}</h2>
                            <p class="commune-count">${commune.schools.length} école${commune.schools.length > 1 ? 's' : ''}</p>
                        </div>
                        <svg class="arrow-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M7 17L17 7M17 7H7M17 7V17"/>
                        </svg>
                    </div>
                `;
                communesGrid.appendChild(bubble);
            });
        }

        // Génération des pages de communes avec leurs écoles
        function generateCommunePages() {
            const communePagesContainer = document.getElementById('commune-pages');
            communePagesContainer.innerHTML = '';
            
            communes.forEach(commune => {
                const page = document.createElement('div');
                page.id = `commune-${commune.id}`;
                page.className = 'commune-page';
                
                let schoolsHTML = '';
                commune.schools.forEach(school => {
                    schoolsHTML += `
                        <div class="school-bubble ${school.colorClass}">
                            <div class="bubble-link" onclick="requestPassword('${school.id}')">
                                <div class="bubble-content">
                                    <h3 class="school-name">${school.name}</h3>
                                    <p class="school-subtitle">Accéder</p>
                                </div>
                                <svg class="arrow-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M7 17L17 7M17 7H7M17 7V17"/>
                                </svg>
                            </div>
                        </div>
                    `;
                });

                page.innerHTML = `
                    <button class="back-button" onclick="showMainPage()">
                        <svg class="back-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 12H5M5 12L12 19M5 12L12 5"/>
                        </svg>
                        Retour aux communes
                    </button>
                    <div class="school-detail-header">
                        <h2>${commune.name}</h2>
                        <p>Sélectionnez un établissement</p>
                    </div>
                    <div class="schools-grid">
                        ${schoolsHTML}
                    </div>
                `;
                
                communePagesContainer.appendChild(page);
            });
        }

        // Génération des pages d'écoles
        function generateSchoolPages() {
            const schoolPagesContainer = document.getElementById('school-pages');
            schoolPagesContainer.innerHTML = '';
            
            communes.forEach(commune => {
                commune.schools.forEach(school => {
                    const page = document.createElement('div');
                    page.id = `school-${school.id}`;
                    page.className = 'school-page';
                    
                    let linksHTML = '';
                    school.links.forEach(link => {
                        linksHTML += `
                            <div class="school-bubble ${school.colorClass}">
                                <a href="${link.url}" target="_blank" rel="noopener noreferrer" class="bubble-link">
                                    <div class="bubble-content">
                                        <h3 class="school-name">${link.title}</h3>
                                        <p class="school-subtitle">Ouvrir</p>
                                    </div>
                                    <svg class="arrow-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M7 17L17 7M17 7H7M17 7V17"/>
                                    </svg>
                                </a>
                            </div>
                        `;
                    });

                    page.innerHTML = `
                        <button class="back-button" onclick="showCommunePage('${commune.id}')">
                            <svg class="back-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M19 12H5M5 12L12 19M5 12L12 5"/>
                            </svg>
                            Retour à ${commune.name}
                        </button>
                        <div class="school-detail-header">
                            <h2>${school.name}</h2>
                            <p>Sélectionnez une action</p>
                        </div>
                        <div class="actions-grid">
                            ${linksHTML}
                        </div>
                    `;
                    
                    schoolPagesContainer.appendChild(page);
                });
            });
        }

        // Initialisation au chargement de la page
        document.addEventListener('DOMContentLoaded', function() {
            generateMainPage();
            generateCommunePages();
            generateSchoolPages();
        });

        // Gestion du mot de passe
        function requestPassword(schoolId) {
            currentSchoolId = schoolId;
            
            // Trouver l'école et sa commune
            let school = null;
            let commune = null;
            for (let c of communes) {
                const s = c.schools.find(sch => sch.id === schoolId);
                if (s) {
                    school = s;
                    commune = c;
                    currentCommuneId = c.id;
                    break;
                }
            }
            
            if (school) {
                document.getElementById('modal-school-name').textContent = school.name;
                document.getElementById('password-input').value = '';
                document.getElementById('error-message').classList.remove('active');
                document.getElementById('password-input').classList.remove('error');
                document.getElementById('password-modal').classList.add('active');
                
                setTimeout(() => {
                    document.getElementById('password-input').focus();
                }, 100);
            }
        }

        function closePasswordModal() {
            document.getElementById('password-modal').classList.remove('active');
        }

        function validatePassword() {
            const password = document.getElementById('password-input').value;
            
            // Trouver l'école
            let school = null;
            for (let commune of communes) {
                const s = commune.schools.find(sch => sch.id === currentSchoolId);
                if (s) {
                    school = s;
                    break;
                }
            }
            
            if (school && (password === school.password || password === MASTER_PASSWORD)) {
                const schoolId = currentSchoolId;
                closePasswordModal();
                showSchoolPage(schoolId);
            } else {
                document.getElementById('error-message').classList.add('active');
                document.getElementById('password-input').classList.add('error');
                document.getElementById('password-input').value = '';
                document.getElementById('password-input').focus();
            }
        }

        document.getElementById('password-input').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                validatePassword();
            }
        });

        // Navigation
        function showMainPage() {
            document.getElementById('main-page').classList.add('active');
            document.querySelectorAll('.commune-page').forEach(page => {
                page.classList.remove('active');
            });
            document.querySelectorAll('.school-page').forEach(page => {
                page.classList.remove('active');
            });
        }

        function showCommunePage(communeId) {
            currentCommuneId = communeId;
            document.getElementById('main-page').classList.remove('active');
            document.querySelectorAll('.commune-page').forEach(page => {
                page.classList.remove('active');
            });
            document.querySelectorAll('.school-page').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById(`commune-${communeId}`).classList.add('active');
        }

        function showSchoolPage(schoolId) {
            document.getElementById('main-page').classList.remove('active');
            document.querySelectorAll('.commune-page').forEach(page => {
                page.classList.remove('active');
            });
            document.querySelectorAll('.school-page').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById(`school-${schoolId}`).classList.add('active');
        }
    </script>
</body>
</html>